<!doctype html>
<script src="//cdnjs.cloudflare.com/ajax/libs/mithril/0.2.3/mithril.min.js"></script>
	<title>My App</title>


<script>
	var myapp={};

	myapp.MyApp=function (data) {
		this.describe=m.prop(data.describe);
		this.check=m.prop(false);

	};

	myapp.AppList=Array;

	myapp.vm=(function(){

		var vm={}
			vm.init=function(){
				vm.list=new myapp.AppList();

				vm.describe=m.prop("");

				vm.add=function(){
					if(vm.describe()){
						vm.list.push(new myapp.MyApp({describe:vm.describe()}));
						vm.describe("");
					}
				};
			}
		return vm
	}())

	myapp.controller=function(){
		myapp.vm.init()
	}

	myapp.view=function(){
		return m("html",[
				m("body",[
					m("input",{onchage:m.withAttr("value",myapp.vm.describe),value:myapp.vm.describe()}),
					m("button",{onclick:myapp.vm.add},"Add"),
					m("table",[
						myapp.vm.list.map(function(task,index){
							return m("tr",[
								m("td",[
									m("input[type=checkbox]",{onclick: m.withAttr("checked", task.check), checked: task.check()})
									]),
								m("td",{style: {textDecoration: task.check() ? "line-through" : "none"}}, task.describe()),
							])
						})	
					])
				])	
			]);
	};



	m.mount(document, {controller: myapp.controller, view: myapp.view});
</script>

